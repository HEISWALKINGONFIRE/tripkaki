<h1>Packages#show</h1>
<h4>Username: <%= @user.username %></h4>

<h4>Title: <%= @package.title %> </h4>


<% if @user == current_user %>

	<%= link_to "Create a Public Tour!", new_package_public_reservation_path(@package), method: 'get' %>

	<br>

	<%= link_to "Edit", edit_package_path(@package)%>
	<%= link_to "Delete", package_path(@package), method: 'delete' %>

<% end %>

	<li>Destination: <%= @package.destination %></li>
	<li>Country: <%= @package.country_name %></li>
	<li>State: <%= @package.state_name %> </li>
	<li>Day: <%= @package.day %> </li>
	<li>Description: <%= @package.description %> </li>
	<li>Accommodation: <%= @package.accommodation %> </li>
	<li>Transportation: <%= @package.transportation %> </li>
	<li>Meals: <%= @package.meal %> </li>
	<li>Maximum participant: <%= @package.head %> </li>
	<li>Price (Private Tour): RM<%= @package.private_price %></li>

<% if user_signed_in? && @user == current_user %>
	<%= link_to "Create new open tour" , "/packages/#{@package.id}/public_reservations/new", method: "get"  %>
<% elsif user_signed_in? %>
	<p>Can't find suitable tour? <%= link_to "Create your own!", root_path %></p>
<% end %> 
	
<h3>Available Open Tour(s)</h3>

	<% if @public_reservations.any? %>

		<table class="table table-hover" >
				<tr>
					<th>No</th>
					<th>Start date</th>
					<th>End date</th>
					<th>Price per pax</th>
					<th>Participants</th>
				</th>

				<% count = 1 %>

			<% @public_reservations.each do |p| %>
				<tr class="clickableRow" data-link="<%= package_public_reservation_path(@package, p) %>" style:"cursor:pointer">
				<%= link_to package_public_reservations_path(p.package.id, p.id) do  %>
					<td><%= count %></td>
				<% end %> 
					<td><%= p.start_date %></td>
					<td><%= p.end_date %></td>
					<td>RM<%= p.public_price %></td>
					<td>0/<%= @package.head %></td>
				</tr>
				<% count += 1 %>

			<% end %>

		</table>

	<% end %>

<br>

<%= link_to "#{@user.username}'s packages", @user %>
